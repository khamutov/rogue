{"version":3,"sources":["tools/tree_parser.js","tools/tree_parser_snippets.js","App.js","reportWebVitals.js","index.js"],"names":["RD3Component","rd3","Component","buildTree","tree","idx","nodes_array","left_idx","length","subtree","name","children","push","right_idx","parseStr","str","nodes","split","treeData","console","log","TreeParserPage","useState","d3node","setD3node","treeStr","setTreeStr","useEffect","initial_tree","margin","width","height","root","d3","treeLayout","size","rootNode","document","createElement","g","append","attr","links","node","selectAll","data","descendants","enter","d","x","y","text","classed","source","target","gen_data","cols","value","placeholder","onChange","e","className","language","style","codestyle","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2999d8f8.chunk.js","sourcesContent":["import rd3 from 'react-d3-library';\n\nimport { Light as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { stackoverflowLight as codestyle } from 'react-syntax-highlighter/dist/esm/styles/hljs';\n\nimport * as d3 from \"d3\";\nimport {useEffect, useState} from \"react\";\n\nimport './tree_parser.css';\nimport {cpp_from_str, cpp_to_str, cpp_tree_definition} from \"./tree_parser_snippets\";\n\nconst RD3Component = rd3.Component;\n\nfunction gen_data(treeData) {\n  console.log(\"runned!\");\n\n  const margin = {top: 20, right: 120, bottom: 20, left: 120},\n    width = 960 - margin.right - margin.left,\n    height = 500 - margin.top - margin.bottom;\n\n  const root = d3.hierarchy(treeData);\n  // var width = 400, height = 420;\n\n  const treeLayout = d3.cluster();\n  treeLayout.size([400, 200]);\n  treeLayout(root);\n\n  var rootNode = document.createElement('div');\n  const svg = d3.select(rootNode).append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n  const g = svg.append(\"g\")\n    .attr(\"font-family\", \"sans-serif\")\n    .attr(\"font-size\", 10)\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  const links = g.append(\"g\").attr(\"class\", \"links\");\n  const nodes = g.append(\"g\").attr(\"class\", \"nodes\");\n\n  // Nodes\n  var node = nodes\n    .selectAll('circle.node')\n    .data(root.descendants())\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", function(d) {\n      if (d.data.name === \"null\") {\n        return \"node-invisible\"\n      }\n\n      return \"node\";\n    })\n    .attr(\"visibility\", function(d) {\n    if (d.data.name === \"null\") {\n      return \"hidden\"\n    }\n\n    return \"visible\";\n  });\n    // .classed('node', true);\n\n  node.append('circle')\n    .attr('cx', function(d) {return d.x;})\n    .attr('cy', function(d) {return d.y;})\n    .attr('r', 10);\n\n\n  // adds the text to the node\n  node\n    .append(\"text\")\n    .attr(\"dx\", function(d) {return d.x - 3;})\n    .attr(\"dy\", function(d) {return d.y + 3;})\n    // .style(\"text-anchor\", \"middle\")\n    .text(function(d) {\n      console.log(d);\n      return d.data.name;\n    });\n\n  // Links\n  links\n    .selectAll('line.link')\n    .data(root.links())\n    .enter()\n    .append('line')\n    .classed('link', true)\n    .attr('x1', function(d) {return d.source.x;})\n    .attr('y1', function(d) {return d.source.y;})\n    .attr('x2', function(d) {return d.target.x;})\n    .attr('y2', function(d) {return d.target.y;})\n    .attr(\"visibility\", function(d) {\n      if (d.target.data.name === \"null\") {\n        return \"hidden\"\n      }\n\n      return \"visible\";\n    });\n\n  return rootNode;\n}\n\nfunction buildTree(tree, idx, nodes_array) {\n  const left_idx = idx * 2 + 1;\n\n  if (left_idx < nodes_array.length) {\n    let subtree = {};\n    subtree.name = nodes_array[left_idx];\n    if (subtree.name !== \"null\") {\n      buildTree(subtree, left_idx, nodes_array);\n    }\n    if (!tree.children) {\n      tree.children = [];\n    }\n    tree.children.push(subtree);\n  }\n\n  const right_idx = idx * 2 + 2;\n  if (right_idx < nodes_array.length) {\n    let subtree = {};\n    subtree.name = nodes_array[right_idx];\n    if (subtree.name !== \"null\") {\n      buildTree(subtree, right_idx, nodes_array);\n    }\n    if (!tree.children) {\n      tree.children = [];\n    }\n    tree.children.push(subtree);\n  }\n}\n\nfunction parseStr(str) {\n  const nodes = str.split(\",\");\n\n  var treeData = {}\n\n  if (nodes.length === 0) {\n    return treeData;\n  }\n\n  treeData.name = nodes[0];\n  treeData.children = [];\n\n  console.log(treeData);\n\n  buildTree(treeData, 0, nodes);\n\n  return treeData;\n}\n\nexport function TreeParserPage() {\n  const [d3node, setD3node] = useState('');\n  const [treeStr, setTreeStr] = useState('1,2,3,4,5,null,7,8,9,0,11,12,13,14,15');\n\n  useEffect(() => {\n    const initial_tree = parseStr(treeStr);\n\n    setD3node(gen_data(initial_tree));\n  }, [treeStr]);\n\n  function handleTreeChange(e) {\n    setTreeStr(e.target.value);\n  }\n\n  return (\n    <div>\n      <h1>Tree parser and visualizer</h1>\n      <textarea cols=\"60\" value={treeStr} placeholder=\"Heap tree repr\" onChange={handleTreeChange} />\n      <div>\n        <p>Current tree</p>\n        <p>{treeStr}</p>\n      </div>\n      <div>\n        <RD3Component data={d3node} />\n      </div>\n      <h2>Code snippets</h2>\n      <div className=\"codeblock\">\n        <h3>Tree definition</h3>\n        <SyntaxHighlighter language=\"cpp\" style={codestyle}>\n          {cpp_tree_definition}\n        </SyntaxHighlighter>\n\n        <h3>Parse string to tree</h3>\n        <SyntaxHighlighter language=\"cpp\" style={codestyle}>\n          {cpp_from_str}\n        </SyntaxHighlighter>\n\n        <h3>Tree to string</h3>\n        <SyntaxHighlighter language=\"cpp\" style={codestyle}>\n          {cpp_to_str}\n        </SyntaxHighlighter>\n      </div>\n    </div>\n\n  )\n}","export let cpp_tree_definition = `\ntemplate <typename T>\nstruct BSTNode {\n  T data;\n  unique_ptr<BSTNode<T>> left, right;\n};\n`\n\nexport let cpp_to_str = `\ntemplate <typename T>\nvoid to_str_store_tree(vector<optional<T>> &array_repr, unique_ptr<BSTNode<T>> &tree, size_t idx) {\n  if (tree == nullptr) {\n    return;\n  }\n\n  if (idx >= array_repr.size()) {\n    array_repr.resize(idx*2 + 1, nullopt);\n  }\n  array_repr[idx] = tree->data;\n\n  to_str_store_tree(array_repr, tree->left, 2*idx + 1);\n  to_str_store_tree(array_repr, tree->right, 2*idx + 2);\n}\n\ntemplate <typename T>\nstring to_str(unique_ptr<BSTNode<T>> &tree) {\n  vector<optional<T>> array_repr;\n\n  to_str_store_tree(array_repr, tree, 0);\n\n  // remove trailing nulls\n  auto rit = array_repr.rbegin();\n  while(!*rit) {\n    rit++;\n  }\n  array_repr.erase(rit.base(), array_repr.end());\n\n  stringstream ss;\n  ss << array_repr.front().value();\n  for (auto it = array_repr.cbegin() + 1; it != array_repr.cend(); it++) {\n    ss << \",\";\n    if (*it) {\n      ss << (*it).value();\n    } else {\n      ss << \"null\";\n    }\n  }\n\n  return ss.str();\n}\n\nTEST(TreeToString, Test1) {\n  unique_ptr<BSTNode<int>> node1(new BSTNode<int>{\n      1,\n      unique_ptr<BSTNode<int>>(new BSTNode<int>{\n          2, nullptr,\n          unique_ptr<BSTNode<int>>(new BSTNode<int>{3, nullptr, nullptr})}),\n      unique_ptr<BSTNode<int>>(new BSTNode<int>{\n          7, unique_ptr<BSTNode<int>>(new BSTNode<int>{6, nullptr, nullptr}),\n          unique_ptr<BSTNode<int>>(new BSTNode<int>{8, nullptr, nullptr})})});\n\n  EXPECT_EQ(to_str(node1), \"1,2,7,null,3,6,8\");\n}\n`;\n\nexport let cpp_from_str = `\ntemplate <typename T>\nvoid build_node(size_t idx, BSTNode<T> *node, vector<optional<T>> arr) {\n  size_t left_idx = 2 * idx + 1;\n  if (left_idx < arr.size()) {\n    if (arr[left_idx]) {\n      node->left = unique_ptr<BSTNode<T>>(new BSTNode<T> {\n          arr[left_idx].value(),\n          nullptr,\n          nullptr\n        });\n      build_node(left_idx, node->left.get(), arr);\n    }\n  }\n  size_t right_idx = 2 * idx + 2;\n  if (right_idx < arr.size()) {\n    if (arr[right_idx]) {\n      node->right = unique_ptr<BSTNode<T>>(new BSTNode<T>{\n          arr[right_idx].value(),\n          nullptr,\n          nullptr});\n      build_node(right_idx, node->right.get(), arr);\n    }\n  }\n}\n\ntemplate <typename T>\nunique_ptr<BSTNode<T>> parse_array(vector<optional<T>> arr) {\n  unique_ptr<BSTNode<T>> tree = unique_ptr<BSTNode<T>>(new BSTNode<T> {\n      arr.front().value(),\n      nullptr,\n      nullptr\n    });\n  build_node(0, tree.get(), arr);\n\n  return tree;\n}\n\nunique_ptr<BSTNode<int>> from_str(string str) {\n  stringstream ss(str);\n  string item;\n\n  vector<optional<int>> arr;\n\n  while(getline(ss, item, ',')) {\n    if (item == \"null\") {\n      arr.push_back(nullopt);\n    } else {\n      arr.push_back(stoi(item));\n    }\n  }\n\n  return parse_array(arr);\n}\n\nunique_ptr<BSTNode<int>> tree = from_str(\"1,2,7,null,3,6,8\");\n`","import './App.css';\nimport {TreeParserPage} from \"./tools/tree_parser\";\nimport React from \"react\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <TreeParserPage />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}